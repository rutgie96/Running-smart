<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0b0d10" />
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Teko:wght@400;500;600&family=Titillium+Web:wght@300;400;600;700&display=swap"
    rel="stylesheet"
  />
  <link
    rel="icon"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3E%F0%9F%8F%83%E2%80%8D%E2%99%80%EF%B8%8F%3C/text%3E%3C/svg%3E"
  />
  <title>🏁 TAG Heuer Running Smart</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <header>
    <div class="header-inner">
      <h1 aria-label="Running Smart hardloop dashboard">🏁 TAG Heuer Running Smart</h1>
      <span class="brand-badge" aria-hidden="true">Formula 1 Edition</span>
      <nav class="primary-nav" aria-label="Hoofdnavigatie">
        <button type="button" class="nav-link active" data-view="homeView">Home</button>
        <button type="button" class="nav-link" data-view="logView">Run loggen</button>
        <button type="button" class="nav-link" data-view="kpiView">KPI overzicht</button>
        <button type="button" class="nav-link" data-view="settingsView">Instellingen</button>
      </nav>
    </div>
  </header>
  <main>
    <section class="view active" id="homeView" aria-labelledby="home-title">
      <h2 id="home-title" class="visually-hidden">Home</h2>
      <section class="hero-card" aria-label="Laatste run overzicht">
        <div class="hero-main">
          <div class="hero-metric">
            <span class="hero-value" id="heroTime">0,00</span>
            <span class="hero-label">Uren</span>
          </div>
          <div class="hero-metric">
            <span class="hero-value" id="heroDistance">0,00</span>
            <span class="hero-label">KM</span>
          </div>
        </div>
        <div class="hero-sub">
          <div class="hero-sub-metric">
            <span class="hero-sub-value" id="heroAllTimePace">—</span>
            <span class="hero-sub-label">Gem. tempo per km (altijd)</span>
          </div>
          <div class="hero-sub-metric">
            <span class="hero-sub-value" id="heroAvgPace">—</span>
            <span class="hero-sub-label">Tempo (30 dagen)</span>
          </div>
          <div class="hero-sub-metric">
            <span class="hero-sub-value" id="heroAvgHr">—</span>
            <span class="hero-sub-label">Gem. hartslag (30 dagen)</span>
          </div>
        </div>
          <p class="hero-caption" id="heroCaption">Voer je eerste run in om de chronograaf te starten.</p>
      </section>
      <div class="home-actions" role="list">
        <article class="action-card" role="listitem">
          <h3>Nieuwe activiteit</h3>
          <p>Leg meteen je afstand, tijd en hartslag vast met slimme validatie.</p>
          <button type="button" class="ghost" data-target="logView">Run toevoegen</button>
        </article>
        <article class="action-card" role="listitem">
          <h3>KPI Dashboard</h3>
          <p>Ontdek trends, snelheden en persoonlijke records uit je runs.</p>
          <button type="button" class="ghost" data-target="kpiView">Bekijk KPI&apos;s</button>
        </article>
      </div>
    </section>

    <section class="view" id="logView" aria-labelledby="form-title">
      <section class="card" aria-labelledby="form-title">
        <div class="card-header">
          <h2 id="form-title">Run toevoegen</h2>
          <p class="card-subtitle">Enter = opslaan · Esc = annuleren</p>
        </div>
        <form id="runForm" novalidate>
          <div class="form-grid">
            <div class="form-field">
              <label for="runDate">Datum</label>
              <input id="runDate" name="runDate" type="date" required aria-required="true" aria-label="Datum van je run" />
            </div>
            <div class="form-field">
              <label for="runDistance">Afstand (km)</label>
              <input
                id="runDistance"
                name="runDistance"
                type="text"
                required
                aria-required="true"
                aria-describedby="distanceHint"
                inputmode="decimal"
                placeholder="Bijv. 5,25"
              />
              <p id="distanceHint" class="input-hint">Gebruik komma of punt. Waarde tussen 0 en 200 km.</p>
            </div>
            <div class="form-field">
              <label for="runTime">Tijd (hh:mm:ss of mm:ss)</label>
              <input
                id="runTime"
                name="runTime"
                type="text"
                required
                aria-required="true"
                aria-describedby="timeHint"
                inputmode="numeric"
                placeholder="Bijv. 00:47:15"
              />
              <p id="timeHint" class="input-hint">Minimaal 00:01:00 en maximaal 24:00:00.</p>
            </div>
            <div class="form-field">
              <label for="runAvgHr">Gem. hartslag (bpm)</label>
              <input
                id="runAvgHr"
                name="runAvgHr"
                type="number"
                min="30"
                max="240"
                step="1"
                required
                aria-required="true"
                aria-describedby="avgHrHint"
                inputmode="numeric"
              />
              <p id="avgHrHint" class="input-hint">Verplicht veld. Typische waarden liggen tussen 120 en 190 bpm.</p>
            </div>
            <div class="form-field">
              <label for="runMaxHr">Max. hartslag (bpm)</label>
              <input
                id="runMaxHr"
                name="runMaxHr"
                type="number"
                min="30"
                max="260"
                step="1"
                aria-describedby="maxHrHint"
                inputmode="numeric"
              />
              <p id="maxHrHint" class="input-hint">Optioneel. Moet gelijk of hoger zijn dan je gemiddelde hartslag.</p>
            </div>
          </div>
          <p class="feedback" id="formFeedback" role="alert" aria-live="polite"></p>
          <p class="feedback warning" id="formWarning" role="status" aria-live="polite"></p>
          <div class="button-row">
            <button type="submit" id="submitButton">Run opslaan</button>
            <button type="button" class="secondary" id="restoreButton" aria-label="Importeer runs uit JSON">📥 Importeren</button>
            <button type="button" class="danger" id="clearButton">Alles wissen</button>
          </div>
        </form>
      </section>

      <section class="card" aria-labelledby="runs-title">
        <h2 id="runs-title">Runs</h2>
        <div class="table-wrapper" role="region" aria-live="polite" aria-labelledby="runs-title">
          <table aria-label="Overzicht van runs" id="runsTable">
            <thead>
              <tr>
                <th scope="col">Datum</th>
                <th scope="col">Afstand</th>
                <th scope="col">Tijd</th>
                <th scope="col">Tempo</th>
                <th scope="col">Gem. HR</th>
                <th scope="col">Max HR</th>
                <th scope="col">Acties</th>
              </tr>
            </thead>
            <tbody id="runsBody"></tbody>
          </table>
          <p id="emptyState" class="empty-state">Nog geen runs toegevoegd. Tijd voor een rondje! 🏃‍♂️</p>
        </div>
      </section>
    </section>

    <section class="view" id="kpiView" aria-labelledby="dashboard-title">
      <section class="card" aria-labelledby="dashboard-title">
        <div class="card-header">
          <h2 id="dashboard-title">KPI overzicht</h2>
          <p class="card-subtitle">Zie je voortgang, tempo en hartslagtrends op één plek.</p>
        </div>
        <div class="kpi-grid" id="kpiGrid" role="list"></div>
        <div class="chart-grid">
          <article class="chart-card" aria-labelledby="hrChart12Title">
            <h3 id="hrChart12Title">Gemiddelde hartslag (laatste 12 weken)</h3>
            <div class="chart-card-body">
              <canvas
                id="hrLineChart12"
                aria-label="Lijngrafiek gemiddelde hartslag laatste 12 weken"
                role="img"
              ></canvas>
              <p id="hrLineEmpty12" class="chart-empty" hidden>Geen runs met hartslag in de laatste 12 weken.</p>
            </div>
          </article>
          <article class="chart-card" aria-labelledby="hrChartAllTitle">
            <h3 id="hrChartAllTitle">Gemiddelde hartslag (altijd)</h3>
            <div class="chart-card-body">
              <canvas
                id="hrLineChartAll"
                aria-label="Lijngrafiek gemiddelde hartslag over alle runs"
                role="img"
              ></canvas>
              <p id="hrLineEmptyAll" class="chart-empty" hidden>Voer runs met hartslag in om deze grafiek te vullen.</p>
            </div>
          </article>
          <article class="chart-card" aria-labelledby="weeklyChartTitle">
            <h3 id="weeklyChartTitle">Kilometers per week (laatste 8 weken)</h3>
            <div class="chart-card-body">
              <div class="chart" id="chartBars" role="list" aria-label="Balkgrafiek kilometers per week"></div>
              <div class="chart-labels" id="chartLabels" aria-hidden="true"></div>
            </div>
          </article>
        </div>
      </section>
    </section>

    <section class="view" id="settingsView" aria-labelledby="settings-title">
      <section class="card" aria-labelledby="settings-title">
        <h2 id="settings-title">Instellingen</h2>
        <p class="settings-intro">
          Stel je doelen en hartslaggegevens in zodat het dashboard direct laat zien hoe je presteert.
        </p>
        <form id="settingsForm" class="settings-form" novalidate>
          <div class="settings-grid">
            <div class="form-field">
              <label for="goalWeeklyKm">Weekdoel afstand (km)</label>
              <input id="goalWeeklyKm" name="goalWeeklyKm" type="number" min="0" step="0.5" aria-describedby="weeklyHint" />
              <p id="weeklyHint" class="input-hint">Gebruik 0 om dit doel tijdelijk uit te schakelen.</p>
            </div>
            <div class="form-field">
              <label for="goalMonthlyKm">Maanddoel afstand (km)</label>
              <input id="goalMonthlyKm" name="goalMonthlyKm" type="number" min="0" step="1" aria-describedby="monthlyHint" />
              <p id="monthlyHint" class="input-hint">Kies een haalbaar totaal voor je trainingsschema.</p>
            </div>
            <div class="form-field">
              <label for="goalPace">Streeftempo (mm:ss per km)</label>
              <input id="goalPace" name="goalPace" type="text" inputmode="numeric" aria-describedby="paceHint" placeholder="bijv. 04:45" />
              <p id="paceHint" class="input-hint">Formaat mm:ss, bijvoorbeeld 04:50.</p>
            </div>
            <div class="form-field">
              <label for="goalMaxHr">Maximale hartslag (bpm)</label>
              <input id="goalMaxHr" name="goalMaxHr" type="number" min="120" max="240" step="1" aria-describedby="maxUserHint" />
              <p id="maxUserHint" class="input-hint">Richtlijn: 207 - (0,7 × leeftijd). Pas aan op basis van je eigen metingen.</p>
            </div>
          </div>
          <section class="zones-card" aria-labelledby="zonesTitle">
            <div class="zones-header">
              <h3 id="zonesTitle">Zones uitgelegd</h3>
              <p>Gebaseerd op je maximale hartslag worden onderstaande trainingszones berekend.</p>
            </div>
            <ul class="zones-list" id="zonesList"></ul>
          </section>
          <div class="settings-actions">
            <button type="submit">Instellingen opslaan</button>
            <button type="button" class="secondary" id="settingsReset">Herstel standaard</button>
            <button type="button" class="secondary" id="backupButton" aria-label="Exporteer runs als JSON">💾 Export JSON</button>
            <button type="button" class="secondary" id="backupCsvButton" aria-label="Exporteer runs als CSV">📄 Export CSV</button>
          </div>
        </form>
        <p id="settingsFeedback" class="feedback" role="status" aria-live="polite"></p>
      </section>
    </section>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>
  <input type="file" accept="application/json" class="visually-hidden" id="importFile" aria-hidden="true" />

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" src="assets/js/main.js"></script>
</body>
</html>
